<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>exiled ¬∑ flex your @</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    body, html {
      width: 100%;
      min-height: 100vh;
      background: url('https://i.pinimg.com/originals/f2/f3/93/f2f393327208542afade5799bcd3814a.gif') center/cover fixed;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }

    /* animated backdrop */
    .overlay {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(8px);
      z-index: 0;
      animation: fadeBlur 1s ease-out;
    }

    @keyframes fadeBlur {
      0% { backdrop-filter: blur(0px); background: rgba(0,0,0,0.3); }
      100% { backdrop-filter: blur(8px); background: rgba(0,0,0,0.7); }
    }

    .container {
      position: relative;
      z-index: 10;
      width: 100%;
      max-width: 1200px;
      padding: 20px;
      animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }

    @keyframes slideUp {
      0% { opacity: 0; transform: translateY(50px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    /* glass card effect */
    .glass-card {
      background: rgba(10, 10, 10, 0.8);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 40px;
      padding: 45px;
      box-shadow: 0 30px 60px rgba(0,0,0,0.9), 0 0 0 1px rgba(255,255,255,0.05) inset;
      transition: all 0.4s;
    }

    .glass-card:hover {
      border-color: rgba(255,255,255,0.2);
      transform: translateY(-5px);
      box-shadow: 0 40px 80px rgba(0,0,0,0.95);
    }

    /* auth cards */
    .auth-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 80vh;
    }

    .auth-card {
      width: 420px;
      max-width: 100%;
      animation: popIn 0.6s ease;
    }

    @keyframes popIn {
      0% { opacity: 0; transform: scale(0.9) rotate(-2deg); }
      100% { opacity: 1; transform: scale(1) rotate(0); }
    }

    h1 {
      font-size: 4rem;
      font-weight: 700;
      letter-spacing: 10px;
      text-align: center;
      background: linear-gradient(135deg, #fff, #aaa, #fff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 30px;
      filter: drop-shadow(0 4px 20px black);
      animation: titleGlow 3s infinite;
    }

    @keyframes titleGlow {
      0%, 100% { filter: drop-shadow(0 4px 20px black); letter-spacing: 10px; }
      50% { filter: drop-shadow(0 4px 40px rgba(255,255,255,0.3)); letter-spacing: 12px; }
    }

    .input-group {
      margin: 25px 0;
      position: relative;
    }

    .input-group input {
      width: 100%;
      background: rgba(255,255,255,0.07);
      border: 2px solid rgba(255,255,255,0.1);
      border-radius: 60px;
      padding: 20px 28px;
      font-size: 1rem;
      color: white;
      outline: none;
      transition: all 0.3s;
    }

    .input-group input:focus {
      border-color: rgba(255,255,255,0.6);
      background: rgba(255,255,255,0.15);
      transform: scale(1.02) translateY(-2px);
      box-shadow: 0 10px 30px rgba(255,255,255,0.1);
    }

    .input-group label {
      position: absolute;
      left: 28px;
      top: 20px;
      color: #aaa;
      transition: 0.3s;
      pointer-events: none;
      font-size: 1rem;
    }

    .input-group input:focus ~ label,
    .input-group input:not(:placeholder-shown) ~ label {
      top: -12px;
      left: 20px;
      font-size: 0.8rem;
      color: white;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(4px);
      border-radius: 30px;
      padding: 4px 15px;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .input-group input::placeholder {
      color: transparent;
    }

    .btn {
      background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
      border: 2px solid rgba(255,255,255,0.2);
      border-radius: 60px;
      padding: 20px 35px;
      width: 100%;
      font-weight: 600;
      font-size: 1.2rem;
      color: white;
      cursor: pointer;
      transition: all 0.3s;
      margin: 15px 0;
      letter-spacing: 2px;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.6s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn:hover {
      background: linear-gradient(135deg, rgba(255,255,255,0.25), rgba(255,255,255,0.15));
      border-color: rgba(255,255,255,0.5);
      transform: translateY(-4px);
      box-shadow: 0 20px 40px -10px black;
    }

    .btn:active {
      transform: translateY(0);
    }

    .link {
      color: #aaa;
      text-align: center;
      display: block;
      margin-top: 20px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1rem;
    }

    .link:hover {
      color: white;
      transform: translateX(8px);
      letter-spacing: 1px;
    }

    .message {
      min-height: 30px;
      color: #ffd966;
      text-align: center;
      font-size: 0.95rem;
      margin: 15px 0;
      animation: shake 0.5s;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
      20%, 40%, 60%, 80% { transform: translateX(3px); }
    }

    /* DASHBOARD */
    .dashboard {
      display: none;
    }

    .dash-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 35px;
      animation: slideRight 0.6s;
    }

    @keyframes slideRight {
      0% { opacity: 0; transform: translateX(-30px); }
      100% { opacity: 1; transform: translateX(0); }
    }

    .user-badge {
      background: rgba(255,255,255,0.1);
      padding: 15px 35px;
      border-radius: 60px;
      border: 1px solid rgba(255,255,255,0.2);
      font-weight: 500;
      font-size: 1.2rem;
      backdrop-filter: blur(5px);
      animation: badgePulse 3s infinite;
    }

    @keyframes badgePulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(255,255,255,0.1); }
      50% { box-shadow: 0 0 30px 0 rgba(255,255,255,0.2); }
    }

    .username-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(190px, 1fr));
      gap: 20px;
      margin: 40px 0;
    }

    .user-card {
      background: rgba(30, 30, 30, 0.7);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 30px;
      padding: 25px 10px;
      text-align: center;
      font-size: 1.2rem;
      font-weight: 500;
      transition: all 0.4s;
      cursor: pointer;
      word-break: break-word;
      animation: cardAppear 0.5s;
      position: relative;
      overflow: hidden;
    }

    @keyframes cardAppear {
      from { opacity: 0; transform: scale(0.8) translateY(30px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }

    .user-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.6s;
    }

    .user-card:hover::before {
      left: 100%;
    }

    .user-card:hover {
      transform: translateY(-10px) scale(1.05);
      border-color: rgba(255,255,255,0.4);
      background: rgba(255,255,255,0.15);
      box-shadow: 0 25px 40px -10px black;
    }

    .user-card.highlight {
      border: 2px solid #ffd700;
      background: rgba(255,215,0,0.1);
      box-shadow: 0 0 30px rgba(255,215,0,0.2);
    }

    .flex-actions {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 30px;
    }

    .small-btn {
      width: auto;
      min-width: 180px;
      padding: 15px 25px;
    }

    .url-box {
      background: rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 60px;
      padding: 15px 30px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-size: 1rem;
      margin-top: 25px;
      cursor: pointer;
      transition: 0.3s;
      border: 2px dashed rgba(255,255,255,0.2);
    }

    .url-box:hover {
      background: rgba(255,255,255,0.1);
      border-color: rgba(255,255,255,0.5);
      transform: scale(1.05);
      border-style: solid;
    }

    /* PROFILE PAGE */
    .profile-view {
      display: none;
      text-align: center;
    }

    .profile-card {
      max-width: 700px;
      margin: 0 auto;
      animation: zoomIn 0.7s;
    }

    @keyframes zoomIn {
      0% { opacity: 0; transform: scale(0.8) rotate(-2deg); }
      100% { opacity: 1; transform: scale(1) rotate(0); }
    }

    .big-username {
      font-size: 6rem;
      font-weight: 700;
      margin: 20px 0;
      text-shadow: 0 0 30px rgba(255,215,0,0.3);
      animation: float 4s infinite;
      word-break: break-word;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }

    .profile-stats {
      margin: 40px 0;
      padding: 25px;
      background: rgba(255,255,255,0.05);
      border-radius: 40px;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .back-btn {
      width: auto;
      padding: 18px 50px;
      margin-top: 30px;
    }

    .footer-note {
      margin-top: 30px;
      color: #888;
      text-align: center;
    }

    .url-display {
      font-size: 1.3rem;
      color: #ffd700;
      margin: 20px 0;
      padding: 15px;
      background: rgba(0,0,0,0.3);
      border-radius: 60px;
    }

    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0,0,0,0.9);
      color: white;
      padding: 15px 25px;
      border-radius: 50px;
      border-left: 4px solid #ffd700;
      animation: slideIn 0.3s;
      z-index: 1000;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); }
      to { transform: translateX(0); }
    }
  </style>
</head>
<body>
<div class="overlay"></div>
<div class="container">

  <!-- LOGIN -->
  <div id="loginCard" class="auth-wrapper">
    <div class="glass-card auth-card">
      <h1>EXILED</h1>
      <div class="input-group">
        <input type="email" id="loginEmail" placeholder=" ">
        <label>email</label>
      </div>
      <div class="input-group">
        <input type="password" id="loginPassword" placeholder=" ">
        <label>password</label>
      </div>
      <button class="btn" id="loginBtn">log in</button>
      <div class="message" id="loginMessage"></div>
      <span class="link" id="switchToSignup">no account? sign up ‚Üí</span>
    </div>
  </div>

  <!-- SIGNUP -->
  <div id="signupCard" class="auth-wrapper" style="display: none;">
    <div class="glass-card auth-card">
      <h1>EXILED</h1>
      <div class="input-group">
        <input type="text" id="signupUsername" placeholder=" ">
        <label>username</label>
      </div>
      <div class="input-group">
        <input type="email" id="signupEmail" placeholder=" ">
        <label>email</label>
      </div>
      <div class="input-group">
        <input type="password" id="signupPassword" placeholder=" ">
        <label>password</label>
      </div>
      <button class="btn" id="signupBtn">sign up & flex</button>
      <div class="message" id="signupMessage"></div>
      <span class="link" id="switchToLogin">‚Üê back to login</span>
    </div>
  </div>

  <!-- DASHBOARD -->
  <div id="dashboard" class="dashboard glass-card">
    <div class="dash-header">
      <h2 style="font-size: 2.5rem; background: linear-gradient(135deg, #fff, #ccc); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">üèùÔ∏è FLEX ZONE</h2>
      <div class="user-badge" id="currentUserBadge">@loading</div>
    </div>
    
    <p style="margin-bottom: 20px; color: #aaa; font-size: 1.1rem;">click any card to visit their profile ‚Üí exiled.lat/username</p>
    
    <div class="username-grid" id="usernameList"></div>
    
    <div class="flex-actions">
      <button class="btn small-btn" id="refreshBtn">‚Üª refresh</button>
      <button class="btn small-btn" id="logoutBtn">leave exile</button>
    </div>
    
    <div class="url-box" id="profileUrlBox" title="click to copy">
      <span>üîó</span>
      <span>exiled.lat/<span id="currentUserSlug">you</span></span>
    </div>
  </div>

  <!-- PROFILE VIEW -->
  <div id="profileView" class="profile-view">
    <div class="glass-card profile-card">
      <div class="big-username" id="profileUsername">@loading</div>
      
      <div class="url-display" id="profileUrl"></div>
      
      <div class="profile-stats">
        <p style="font-size: 1.2rem;">‚ú® exiled since 2026 ‚ú®</p>
        <p style="margin-top: 20px; font-size: 1rem; color: #aaa;">‚ö° flexing in the exile community ‚ö°</p>
      </div>
      
      <button class="btn back-btn" id="backToDashboard">‚Üê back to flex</button>
      
      <div class="footer-note">
        <span>exiled.lat/yourname ¬∑ claim your space</span>
      </div>
    </div>
  </div>

</div>

<script>
  (function() {
    // Supabase setup
    const SUPABASE_URL = "https://opixidygpndbfuisjkrk.supabase.co";
    const SUPABASE_ANON_KEY = "sb_publishable_N6RdTgjgUHQbdtvPX9uPqA_VTraUegI";
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // DOM elements
    const loginCard = document.getElementById('loginCard');
    const signupCard = document.getElementById('signupCard');
    const dashboard = document.getElementById('dashboard');
    const profileView = document.getElementById('profileView');
    
    const loginEmail = document.getElementById('loginEmail');
    const loginPassword = document.getElementById('loginPassword');
    const loginBtn = document.getElementById('loginBtn');
    const loginMessage = document.getElementById('loginMessage');
    
    const signupUsername = document.getElementById('signupUsername');
    const signupEmail = document.getElementById('signupEmail');
    const signupPassword = document.getElementById('signupPassword');
    const signupBtn = document.getElementById('signupBtn');
    const signupMessage = document.getElementById('signupMessage');
    
    const switchToSignup = document.getElementById('switchToSignup');
    const switchToLogin = document.getElementById('switchToLogin');
    
    const usernameList = document.getElementById('usernameList');
    const currentUserBadge = document.getElementById('currentUserBadge');
    const currentUserSlug = document.getElementById('currentUserSlug');
    const refreshBtn = document.getElementById('refreshBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const profileUrlBox = document.getElementById('profileUrlBox');
    
    const profileUsername = document.getElementById('profileUsername');
    const profileUrl = document.getElementById('profileUrl');
    const backToDashboard = document.getElementById('backToDashboard');

    // State
    let currentUser = null;
    let allUsers = [];

    // Helper functions
    function showMessage(element, text, isError = false) {
      element.textContent = text;
      element.style.color = isError ? '#ff9999' : '#ffd966';
      setTimeout(() => { element.textContent = ''; }, 4000);
    }

    function showNotification(text, isError = false) {
      const notif = document.createElement('div');
      notif.className = 'notification';
      notif.textContent = text;
      notif.style.background = isError ? 'rgba(255,0,0,0.8)' : 'rgba(0,0,0,0.9)';
      document.body.appendChild(notif);
      setTimeout(() => notif.remove(), 3000);
    }

    function escapeHtml(str) {
      return String(str).replace(/[&<>"]/g, function(m) {
        if (m === '&') return '&amp;';
        if (m === '<') return '&lt;';
        if (m === '>') return '&gt;';
        if (m === '"') return '&quot;';
        return m;
      });
    }

    // Router - handle URL paths
    async function handleRoute() {
      const path = window.location.pathname;
      
      // If it's the root path, show appropriate view
      if (path === '/' || path === '/index.html') {
        const { data } = await supabase.auth.getSession();
        if (data.session) {
          dashboard.style.display = 'block';
          loginCard.style.display = 'none';
          signupCard.style.display = 'none';
          profileView.style.display = 'none';
        } else {
          loginCard.style.display = 'flex';
          dashboard.style.display = 'none';
          profileView.style.display = 'none';
        }
        return;
      }
      
      // Check if path is a username (e.g., /username)
      const username = path.substring(1); // Remove leading /
      if (username && !username.includes('/') && !username.includes('.')) {
        // Try to find this username
        const { data, error } = await supabase
          .from('profiles')
          .select('username')
          .eq('username', username)
          .maybeSingle();
        
        if (data) {
          // Show profile page
          showProfilePage(username);
        } else {
          // Username not found, redirect to home with message
          window.history.pushState({}, '', '/');
          showNotification('username not found', true);
          const { data: sessionData } = await supabase.auth.getSession();
          if (sessionData.session) {
            dashboard.style.display = 'block';
          } else {
            loginCard.style.display = 'flex';
          }
        }
      }
    }

    // Profile page
    function showProfilePage(username) {
      loginCard.style.display = 'none';
      signupCard.style.display = 'none';
      dashboard.style.display = 'none';
      profileView.style.display = 'block';
      
      profileUsername.textContent = `@${username}`;
      profileUrl.textContent = `exiled.lat/${username}`;
    }

    // Fetch all users
    async function fetchAllUsers() {
      const { data, error } = await supabase
        .from('profiles')
        .select('id, username')
        .order('username');
      
      if (error) {
        console.warn('Fetch error:', error);
        usernameList.innerHTML = '<div class="user-card" style="grid-column: 1/-1;">‚ö†Ô∏è no users yet</div>';
        return [];
      }
      
      allUsers = data || [];
      renderUserGrid();
      return allUsers;
    }

    function renderUserGrid() {
      if (!allUsers.length) {
        usernameList.innerHTML = '<div class="user-card" style="grid-column: 1/-1;">üåÄ be the first exile</div>';
        return;
      }
      
      let html = '';
      allUsers.forEach(user => {
        const isYou = currentUser && user.id === currentUser.id;
        html += `<div class="user-card ${isYou ? 'highlight' : ''}" data-username="${escapeHtml(user.username)}">
          @${escapeHtml(user.username)}${isYou ? ' üëë' : ''}
        </div>`;
      });
      
      usernameList.innerHTML = html;
      
      // Add click handlers
      document.querySelectorAll('.user-card').forEach(card => {
        card.addEventListener('click', () => {
          const username = card.dataset.username;
          if (username) {
            // Update URL and show profile
            window.history.pushState({}, '', `/${username}`);
            showProfilePage(username);
          }
        });
      });
    }

    // Create/update profile
    async function upsertProfile(userId, username) {
      const { error } = await supabase
        .from('profiles')
        .upsert({ 
          id: userId, 
          username: username, 
          updated_at: new Date() 
        });
      
      if (error) {
        console.error('Profile upsert error:', error);
        return false;
      }
      return true;
    }

    // Login
    loginBtn.addEventListener('click', async () => {
      const email = loginEmail.value.trim();
      const password = loginPassword.value.trim();
      
      if (!email || !password) {
        showMessage(loginMessage, 'fill all fields', true);
        return;
      }
      
      const { data, error } = await supabase.auth.signInWithPassword({
        email,
        password
      });
      
      if (error) {
        showMessage(loginMessage, error.message, true);
        return;
      }
      
      const user = data.user;
      const { data: profile } = await supabase
        .from('profiles')
        .select('username')
        .eq('id', user.id)
        .maybeSingle();
      
      let username = profile?.username || user.email?.split('@')[0] || 'exile';
      
      if (!profile) {
        await upsertProfile(user.id, username);
      }
      
      currentUser = { id: user.id, email: user.email, username };
      currentUserBadge.textContent = `@${username}`;
      currentUserSlug.textContent = username;
      
      await fetchAllUsers();
      
      loginCard.style.display = 'none';
      dashboard.style.display = 'block';
      profileView.style.display = 'none';
      
      window.history.pushState({}, '', '/');
      showNotification(`welcome back, @${username}!`);
    });

    // Signup
    signupBtn.addEventListener('click', async () => {
      const username = signupUsername.value.trim().toLowerCase().replace(/[^a-z0-9]/g, '');
      const email = signupEmail.value.trim();
      const password = signupPassword.value.trim();
      
      if (!username || !email || !password) {
        showMessage(signupMessage, 'all fields required', true);
        return;
      }

      if (username.length < 3) {
        showMessage(signupMessage, 'username must be at least 3 characters', true);
        return;
      }
      
      // Check if username exists
      const { data: existing } = await supabase
        .from('profiles')
        .select('username')
        .eq('username', username)
        .maybeSingle();
      
      if (existing) {
        showMessage(signupMessage, 'username taken', true);
        return;
      }
      
      const { data, error } = await supabase.auth.signUp({
        email,
        password
      });
      
      if (error) {
        showMessage(signupMessage, error.message, true);
        return;
      }
      
      if (data.user) {
        await upsertProfile(data.user.id, username);
        
        // Auto login
        const { error: loginError } = await supabase.auth.signInWithPassword({
          email,
          password
        });
        
        if (loginError) {
          showMessage(signupMessage, 'signup ok, please login', false);
          switchToLogin.click();
          return;
        }
        
        currentUser = { id: data.user.id, email, username };
        currentUserBadge.textContent = `@${username}`;
        currentUserSlug.textContent = username;
        
        await fetchAllUsers();
        
        dashboard.style.display = 'block';
        signupCard.style.display = 'none';
        profileView.style.display = 'none';
        
        window.history.pushState({}, '', '/');
        showNotification(`welcome to exile, @${username}!`);
      }
    });

    // Logout
    logoutBtn.addEventListener('click', async () => {
      await supabase.auth.signOut();
      currentUser = null;
      dashboard.style.display = 'none';
      profileView.style.display = 'none';
      loginCard.style.display = 'flex';
      window.history.pushState({}, '', '/');
      showNotification('logged out');
    });

    // Refresh
    refreshBtn.addEventListener('click', fetchAllUsers);

    // Navigation
    switchToSignup.addEventListener('click', () => {
      loginCard.style.display = 'none';
      signupCard.style.display = 'flex';
    });

    switchToLogin.addEventListener('click', () => {
      signupCard.style.display = 'none';
      loginCard.style.display = 'flex';
    });

    backToDashboard.addEventListener('click', async () => {
      window.history.pushState({}, '', '/');
      const { data } = await supabase.auth.getSession();
      if (data.session) {
        dashboard.style.display = 'block';
        profileView.style.display = 'none';
      } else {
        loginCard.style.display = 'flex';
        profileView.style.display = 'none';
      }
    });

    // Copy URL
    profileUrlBox.addEventListener('click', () => {
      const text = `exiled.lat/${currentUserSlug.textContent}`;
      navigator.clipboard.writeText(text);
      showNotification('‚ú® url copied!');
    });

    // Handle browser back/forward
    window.addEventListener('popstate', handleRoute);

    // Initialize
    async function init() {
      // Handle the current route
      await handleRoute();
      
      // Get session and update UI
      const { data } = await supabase.auth.getSession();
      if (data.session) {
        const user = data.session.user;
        const { data: profile } = await supabase
          .from('profiles')
          .select('username')
          .eq('id', user.id)
          .maybeSingle();
        
        let username = profile?.username || user.email?.split('@')[0] || 'exile';
        
        if (!profile) {
          await upsertProfile(user.id, username);
        }
        
        currentUser = { id: user.id, email: user.email, username };
        currentUserBadge.textContent = `@${username}`;
        currentUserSlug.textContent = username;
        
        await fetchAllUsers();
      }
    }

    init();
  })();
</script>
</body>
</html>
